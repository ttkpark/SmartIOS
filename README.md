# SmartIOS

개발 기간 : 2021.04.24~2021.09.22

## 프로젝트 소개 및 개발 이유

- 회사, 아르바이트 등의 업장에서 출석 관리를 자동으로 하는 프로젝트이다. 일부 회사는 직원의 출결을 관리할 때 수기로 기록하는데, 이를 휴대폰과 블루투스 비컨 인식 장치를 이용해 자동으로 출결을 기록하는 프로젝트다.
- 출결기록 신뢰성 문제, 비컨인식거리 과대 문제 등으로 완전히 프로젝트를 끝내지는 못했지만 휴대폰 또는 비콘카드의 존재를 충분히 인식할 수 있을 정도로 구현했다.

### 역할 소개

- 서버+웹+기획 담당 : 출결 웹 서비스, 출결 데이터 DB를 구현함. 프로젝트를 기획함.
- 비콘카드 및 iOS 담당 : 비콘카드 단말기 및 iOS 어플리케이션 구현함.
- **비콘인식 AP 및 Android 담당 : 사원의 존재를 인식하는 AP 제작함. Android 어플리케이션을 구현함.**
- 본인이 맡은 부분은
- `/3D Printing`, `/Android App`, `/Firmware Circuit`, `/Firmware Source`이다.

## 개발 요소

- 본인은 블루투스 비컨 신호를 인식하여 휴대폰 및 사원의 존재 유무를 인식하는 비콘인식 AP(SmartIOS AP)를 제작 및 구현했다.(Embedded C, STM32)

### #1 비콘 AP 개발 세부 기능

- 이더넷 칩을 통해 백엔드 서버와 통신하기, 블루투스 비컨 신호 인식하기(스마트폰 인식거리 측정결과 10m 내외), 백엔드 서버를 통한 펌웨어 버전관리 구현하기 등을 구현했다.

![SmartIOS AP 기판제작 및 동작테스트 모습.](SmartIOS%20ba8202ad0f1c42e5b51be1b262e8f686/20210725_230111.jpg)

SmartIOS AP 기판제작 및 동작테스트 모습.

- SmartIOS 계정관리 및 자신의 출입기록을 확인할 수 있는 기능과 블루투스 신호를 지속적으로 출력해 자신의 존재를 알리는 기능의 Android 어플리케이션을 구현했다.

### #2 Android 어플리케이션 세부 기능

- Kotlin으로 개발. BottomNavigationBar를 활용한 Fragment 활용, 인터넷 백엔드와 API 통신, 암복호화, 블루투스 비컨 신호 송출, 백그라운드 및 포그라운드 서비스 활용, RecycleList 등을 주로 구현했다.

![SmartIOS Android 앱 동작화면 : 메인화면](SmartIOS%20ba8202ad0f1c42e5b51be1b262e8f686/Screenshot_20210318-220250.png)

SmartIOS Android 앱 동작화면 : 메인화면

![SmartIOS Android 앱 ](SmartIOS%20ba8202ad0f1c42e5b51be1b262e8f686/%25EC%2595%2588%25EB%2593%259C%25EB%25A1%259C%25EC%259D%25B4%25EB%2593%259C_%25EC%2582%25AC%25EC%25A7%25842.png)

SmartIOS Android 앱 

## 어려움 및 극복사항

- 임베디드 프로그래밍 모듈 호환 문제 : 이더넷을 통한 백엔드 연결에서 모듈 문제가 빈번하여 프로젝트를 7번 다시 시작하였다. (#1.lwIP 시도 #2.아두이노 코드 C로 포팅 시도 #3.다른 라이브러리로 시도 #4.칩 및 회로 교체 #5~7.MCU 칩교체) 개발 초기부터 15일 사이에 백엔드와 통신을 최초로 성공하기까지 프로젝트를 5번 다시 시작함.
- 블루투스 칩, 유선 인터넷 AP, 코틀린 앱개발 등 새로운 도전을 많이 시도해보았다. 기존 지식이 없어 인터넷으로 기존 지식을 만들어 나가는 데서 프로젝트 시간이 다소 지연되었다.

## 협업 사항

- 비콘-AP간 블루투스 비컨 프로토콜을 확정함.
- 휴대폰-서버, AP-서버 간 웹 API 통신 프로토콜을 확정함.
- 센서를 야외에 나와 직접 측정함.
